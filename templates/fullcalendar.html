<h2>üìÖ Xem l·ªãch tr·ª±c</h2>

<form method="GET" class="mb-3">
  <label for="department">L·ªçc theo khoa:</label>
  <select name="department" id="department" onchange="this.form.submit()">
    <option value="">-- T·∫•t c·∫£ khoa --</option>
    {% for d in departments %}
      <option value="{{ d }}" {% if d == selected_department %}selected{% endif %}>{{ d }}</option>
    {% endfor %}
  </select>
</form>
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>L·ªãch tr·ª±c n√¢ng cao</title>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
</head>
<body>
  <h2>L·ªãch tr·ª±c (FullCalendar)</h2>
  <div id='calendar'></div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridWeek',
        locale: 'vi',
        events: [
          {% for s in schedules %}
            {
              title: '{{ s.user.name }} - {{ s.shift.name }}',
              start: '{{ s.work_date }}T{{ s.shift.start_time }}'
            },
          {% endfor %}
        ]
      });
      calendar.render();
    });
  </script>
</body>
</html>
