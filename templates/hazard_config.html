<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thi·∫øt l·∫≠p m·ª©c ƒë·ªôc h·∫°i</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-4">Thi·∫øt l·∫≠p m·ª©c ƒë·ªôc h·∫°i</h2>
    <a href="/" class="btn btn-secondary">üè† V·ªÅ trang ch·ªß</a>
  </div>

  <form method="post" class="row g-3 border p-3 mb-4 rounded">
    <div class="col-md-4">
        <label for="departments" class="form-label">Khoa/Ph√≤ng</label>
        <select name="departments" id="departments" class="form-select" multiple required>
            {% for d in departments %}
                <option value="{{ d }}">{{ d }}</option>
            {% endfor %}
        </select>
        <small class="text-muted">Nh·∫•n Ctrl (ho·∫∑c Cmd tr√™n Mac) ƒë·ªÉ ch·ªçn nhi·ªÅu khoa</small>
    </div>

    <div class="col-md-2">
        <label for="position" class="form-label">Ch·ª©c v·ª• (n·∫øu √°p d·ª•ng)</label>
        <input type="text" name="position" class="form-control" placeholder="VD: HL, KTV">
    </div>

    <div class="col-md-2">
        <label for="hazard_level" class="form-label">M·ª©c ƒë·ªôc h·∫°i</label>
        <input type="number" step="0.01" name="hazard_level" class="form-control" required>
    </div>

    <div class="col-md-2">
        <label for="unit" class="form-label">ƒê∆°n v·ªã</label>
        <select name="unit" class="form-select">
            <option value="percent">%</option>
            <option value="ngay">Ng√†y</option>
            <option value="gio">Gi·ªù</option>
        </select>
    </div>

    <div class="col-md-2">
        <label for="duration_hours" class="form-label">S·ªë gi·ªù t√≠nh</label>
        <input type="number" step="0.5" name="duration_hours" class="form-control" required>
    </div>

    <div class="col-md-3">
        <label class="form-label">T·ª´ ng√†y</label>
        <input type="date" name="start_date" class="form-control" required>
    </div>
    <div class="col-md-3">
        <label class="form-label">ƒê·∫øn ng√†y</label>
        <input type="date" name="end_date" class="form-control" required>
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-primary">L∆∞u c·∫•u h√¨nh</button>
    </div>
  </form>

  <h4>Danh s√°ch c·∫•u h√¨nh</h4>
  <table class="table table-bordered">
      <thead>
          <tr>
              <th>Khoa</th>
              <th>Ch·ª©c v·ª•</th>
              <th>M·ª©c %</th>
              <th>ƒê∆°n v·ªã</th>
              <th>S·ªë gi·ªù</th>
              <th>Th·ªùi gian √°p d·ª•ng</th>
              <th>H√†nh ƒë·ªông</th>
          </tr>
      </thead>
      <tbody>
          {% for c in configs %}
          <tr>
              <td>{{ c.department }}</td>
              <td>{{ c.position or 'T·∫•t c·∫£' }}</td>
              <td>{{ c.hazard_level }}</td>
              <td>{{ c.unit }}</td>
              <td>{{ c.duration_hours }}</td>
              <td>{{ c.start_date.strftime('%d/%m/%Y') }} ‚Üí {{ c.end_date.strftime('%d/%m/%Y') }}</td>
              <td>
                  <a href="{{ url_for('edit_hazard_config', config_id=c.id) }}" class="btn btn-sm btn-warning">S·ª≠a</a>
                  <a href="{{ url_for('delete_hazard_config', config_id=c.id) }}"
                     class="btn btn-danger btn-sm"
                     onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c·∫•u h√¨nh n√†y?')">X√≥a</a>
              </td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
</body>
</html>
